:root {
  --bg: #0f1115;
  --panel: #151924;
  --panel-2: #1b2130;
  --text: #0d2138;
  --muted: #4a566b;
  --line: #2b2f35;    /* dark grey for default links */
  --accent: #5aa9ff;
  --accent-2: #7cc3ff;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: #87ceeb; /* sky blue */
}

/* Dark theme variables (dark blue) */
body.theme-dark {
  --text: #000000;
  --muted: #b3c1d9;
  --line: #8aa4c8;
  background: linear-gradient(180deg, #0f2c59, #0a1f3f 60%, #081833);
}
body.theme-dark .topbar { background: #000a1b; color: #eaf2ff; border-bottom-color: #17345f; box-shadow: 0 2px 6px rgba(0,0,0,0.25); }
body.theme-dark .controls > button { background: #0f2a52; border-color: #1a3c72; color: #eaf2ff; }
body.theme-dark .controls > button:hover { background: #153463; border-color: #27508e; }
body.theme-dark .modal-dialog { background: #0f2a52; color: #eaf2ff; border-color: #1a3c72; }
body.theme-dark .modal-meta { background: #112e5a; border-top-color: #1a3c72; }
body.theme-dark .modal-close { color: #d7e6ff; }

/* Light/print theme */
/* removed theme-light variant per user request */

.topbar {
  position: sticky;
  top: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  background: #f8fbff;
  color: #0d2138;
  border-bottom: 1px solid #c9d7ea;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}
.brand { font-weight: 700; letter-spacing: 0.2px; }
.controls { display: flex; gap: 8px; }
.controls > button {
  appearance: none;
  border: 1px solid #bcd2e6;
  background: #ffffff;
  color: #0d2138;
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}
.controls > button:focus-visible { outline: 2px solid #7aa7ff; outline-offset: 2px; }
.controls > button:hover { background: #eef5ff; border-color: #8fb0e3; }
#themeBtn.sun-icon { color: #f5b301; }
#themeBtn.moon-icon { color: #f7f9ff; }

@media (max-width: 640px) {
  .topbar {
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    text-align: center;
  }
  .brand {
    width: 100%;
    text-align: center;
  }
  .controls {
    width: 100%;
    justify-content: center;
    flex-wrap: nowrap;
    gap: 6px;
  }
  .controls > button {
    flex: 0 0 auto;
    padding: 4px 10px;
    font-size: 0.85rem;
  }
  .controls::-webkit-scrollbar {
    display: none;
  }
}

.canvas-wrap {
  position: relative;
  height: calc(100% - 52px);
}

#tree {
  width: 100%;
  height: 100%;
  touch-action: none; /* allow custom pan/zoom */
  display: block;
}

/* Node (person bubble) styling */
.person { cursor: pointer; }
.person rect {
  /* unified bubble color */
  fill: #ffffff;
  stroke: #c9d7ea;
  stroke-width: 1.5px;
  rx: 12px;
  ry: 12px;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));
}
.person .name { font-size: 13px; font-weight: 600; fill: var(--text); }
.person .meta { font-size: 11px; fill: var(--muted); }
.person:hover rect { stroke: #5c6b86; }

/* Links */
.link { fill: none; stroke: var(--line); stroke-width: 2.25px; }
.marriage-line { stroke: var(--line); stroke-width: 2.25px; }
.blood-link { fill: none; stroke: #d4af37; stroke-width: 3.5px; opacity: 0.95; }

/* Slow pulse for DNA (gold) lines when DNA mode is active */
.dna-active .blood-link { animation: dnaPulse 3.6s ease-in-out infinite; }
/* Dim base connectors while DNA highlight is active to avoid dark line peek-through */
.dna-active .link { opacity: 0.25; transition: opacity 150ms ease; }
@keyframes dnaPulse {
  0%, 100% { stroke-width: 3.5px; stroke: #d4af37; }
  50%      { stroke-width: 5px;   stroke: #ffd24d; }
}

/* Highlight the DNA parent (left bubble) when DNA is active */
.dna-active .person.primary rect {
  stroke: #d4af37;
  stroke-width: 3.5px;
  animation: dnaPulse 3.6s ease-in-out infinite;
}

/* (no focus ring on click) */

/* Tiny hint text (if any) */
.hint { position: absolute; bottom: 12px; right: 16px; color: var(--muted); font-size: 12px; }

/* Modal */
.modal { position: fixed; inset: 0; background: rgba(0,0,0,0.65); display: none; align-items: center; justify-content: center; z-index: 10; }
.modal.open { display: flex; }
.modal-dialog { position: relative; background: #f8fbff; color: #0d2138; border: 1px solid #c9d7ea; border-radius: 12px; max-width: 92vw; max-height: 92vh; box-shadow: 0 10px 30px rgba(0,0,0,0.35); overflow: hidden; }
.modal-img { display: block; max-width: 92vw; max-height: 74vh; width: 100%; height: auto; object-fit: contain; background: #e8f0fb; }
.modal-meta { padding: 10px 14px 16px; background: #f1f7ff; border-top: 1px solid #d9e5f7; }
.modal-name { font-weight: 700; margin-bottom: 4px; }
.modal-dob { color: #385070; font-size: 13px; }
.modal-close { position: absolute; top: 6px; right: 8px; border: 0; background: transparent; color: #27425f; font-size: 22px; line-height: 1; cursor: pointer; padding: 4px 8px; }
.modal-close:hover { color: #0d2138; }

